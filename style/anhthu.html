<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>T√¢m Th∆∞</title>
    <style>
      .polaroid {
        position: absolute;
        width: 80px;
        height: 80px;
        background: #fff;
        border: 6px solid #fff;
        border-radius: 10px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
        overflow: hidden;
        z-index: 2;
        opacity: 0;
        animation: photoFadeIn 0.9s ease forwards;
      }
      .photo1 {
        left: -75px;
        top: -80px;
        --rotate: -15deg;
        animation-delay: 0.2s;
      }
      .photo2 {
        left: 80px;
        top: -100px;
        --rotate: 11deg;
        animation-delay: 0.4s;
      }
      .photo3 {
        right: -80px;
        top: -80px;
        --rotate: -15deg;
        animation-delay: 0.6s;
      }
      .photo4 {
        left: -90px;
        top: 120px;
        --rotate: -4deg;
        animation-delay: 0.8s;
      }
      .photo5 {
        right: -140px;
        top: 140px;
        --rotate: 10deg;
        animation-delay: 1s;
      }
      .photo6 {
        left: -100px;
        bottom: -80px;
        --rotate: 8deg;
        animation-delay: 1.2s;
      }
      .photo7 {
        right: -100px;
        bottom: -100px;
        --rotate: 30deg;
        animation-delay: 1.4s;
      }
      .photo8 {
        left: 80px;
        bottom: -100px;
        --rotate: -6deg;
        animation-delay: 1.6s;
      }

      @keyframes photoFadeIn {
        0% {
          opacity: 0;
          transform: translateY(-40px) scale(0.8) rotate(-10deg);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1) rotate(var(--rotate));
        }
      }

      body {
        margin: 0;
        padding: 0;
        background-image: url("https://i.pinimg.com/originals/a2/49/26/a249267f0655179f75d94573a14a2e62.gif");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        font-family: "Dancing Script", cursive;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .wrapper {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }

      .letter-container {
        background-color: #fff5ee;
        width: 250px;
        max-width: 100%;
        height: 450px;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        border: 2px solid #f5f5f5;
        display: flex;
        flex-direction: column;
        transform: rotate(1.8deg);
        justify-content: center;
        animation: letterFadeIn 1.2s ease;
        z-index: 1;
        overflow: hidden;
      }

      @keyframes letterFadeIn {
        0% {
          opacity: 0;
          transform: translateY(40px) scale(0.95) rotate(1.8deg);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1) rotate(1.8deg);
        }
      }

      .letter-body {
        line-height: 1.5;
        color: #db7093;
        font-size: 18px;
        text-align: justify;
        padding: 10px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        display: block;
        transform: rotate(1.2deg);
        transform-origin: center;
        overflow-y: auto;
      }

      .letter-body::-webkit-scrollbar {
        display: none;
      }

      .letter-body p {
        margin: 5px 0;
      }

      .surprise-button {
        background-color: #db7093;
        color: white;
        border: none;
        padding: 10px 20px;
        font-family: "Dancing Script", cursive;
        font-size: 18px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 20px;
        display: block;
        margin-left: auto;
        margin-right: auto;
        transition: background-color 0.3s;
      }
      .surprise-button:hover {
        background-color: #c71585;
      }

      #letterText {
        white-space: pre-line;
      }

      @media (max-width: 500px) {
        .wrapper > div {
          transform: scale(0.85);
        }
      }
      @media (max-width: 400px) {
        .wrapper > div {
          transform: scale(0.75);
        }
      }
      @media (max-width: 350px) {
        .wrapper > div {
          transform: scale(0.65);
        }
      }

      .polaroid:hover {
        width: 100px;
        height: 100px;
        transition: all 0.6s ease-in-out;
      }

      .scroll-down {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 22px;
        color: #db7093;
        animation: bounce 1s infinite;
        cursor: pointer;
        display: none; /* m·∫∑c ƒë·ªãnh ·∫©n */
        z-index: 10;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateX(-50%) translateY(0);
        }
        50% {
          transform: translateX(-50%) translateY(6px);
        }
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="wrapper">
      <div style="position: relative; width: 250px; height: 450px">
        <!-- ·∫¢nh polaroid -->
        <div class="polaroid photo1">
          <img
            src="img/CA (1).jpg"
            alt="·∫¢nh 1"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo2">
          <img
            src="img/CA (2).jpg"
            alt="·∫¢nh 2"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo3">
          <img
            src="img/CA (3).jpg"
            alt="·∫¢nh 3"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo4">
          <img
            src="img/CA (4).jpg"
            alt="·∫¢nh 4"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo5">
          <img
            src="img/CA (5).jpg"
            alt="·∫¢nh 5"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo6">
          <img
            src="img/CA (6).jpg"
            alt="·∫¢nh 6"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo7">
          <img
            src="img/CA (7).jpg"
            alt="·∫¢nh 7"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>
        <div class="polaroid photo8">
          <img
            src="img/CA (8).jpg"
            alt="·∫¢nh 8"
            style="width: 100%; height: 100%; object-fit: cover"
          />
        </div>

        <!-- Th∆∞ -->
        <div
          class="letter-container"
          style="
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            margin: auto;
          "
        >
          <div class="letter-body">
            <p id="letterText"></p>
            <button
              class="surprise-button"
              id="surpriseBtn"
              onclick="goNext()"
              style="display: none"
            >
              B·∫•t ng·ªù ƒë√¢y!
            </button>
          </div>
          <div class="scroll-down" id="scrollDown">‚ù§Ô∏è‚¨áÔ∏è‚ù§Ô∏è</div>
        </div>
      </div>
    </div>

    <!-- Nh·∫°c n·ªÅn -->
    <audio id="bgMusic" src="./Aingoaianh.mp3" preload="auto" loop></audio>

    <script>
      const letterBody = document.querySelector(".letter-body");
      const scrollDown = document.getElementById("scrollDown");

      // theo d√µi cu·ªôn
      letterBody.addEventListener("scroll", () => {
        if (
          letterBody.scrollTop + letterBody.clientHeight >=
          letterBody.scrollHeight - 5
        ) {
          // ƒë√£ t·ªõi cu·ªëi
          scrollDown.style.display = "none";
        } else {
          // c√≤n n·ªôi dung ph√≠a d∆∞·ªõi
          scrollDown.style.display = "block";
        }
      });

      // b·∫•m v√†o m≈©i t√™n th√¨ cu·ªôn xu·ªëng cu·ªëi
      scrollDown.addEventListener("click", () => {
        letterBody.scrollTo({
          top: letterBody.scrollHeight,
          behavior: "smooth",
        });
      });

      // h√†m ki·ªÉm tra sau khi g√µ ch·ªØ
      function checkScrollIndicator() {
        if (letterBody.scrollHeight > letterBody.clientHeight) {
          scrollDown.style.display = "block";
        } else {
          scrollDown.style.display = "none";
        }
      }

      const bgMusic = document.getElementById("bgMusic");

      window.addEventListener("load", () => {
        const savedTime = localStorage.getItem("musicTime");
        const wasPlaying = localStorage.getItem("musicPlaying") === "true";
        if (savedTime) bgMusic.currentTime = parseFloat(savedTime);
        if (wasPlaying) {
          bgMusic.play().catch(() => {
            console.log("Autoplay b·ªã ch·∫∑n, s·∫Ω ph√°t khi user ch·∫°m m√†n h√¨nh");
          });
        }
        typeEffect(); // b·∫Øt ƒë·∫ßu g√µ ch·ªØ khi load trang
      });

      bgMusic.addEventListener("timeupdate", () => {
        localStorage.setItem("musicTime", bgMusic.currentTime);
      });

      function enableMusicOnTouch() {
        if (bgMusic.paused) {
          bgMusic
            .play()
            .catch((err) => console.log("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", err));
        }
        document.removeEventListener("click", enableMusicOnTouch);
        document.removeEventListener("touchstart", enableMusicOnTouch);
      }
      document.addEventListener("click", enableMusicOnTouch);
      document.addEventListener("touchstart", enableMusicOnTouch);

      function goNext() {
        localStorage.setItem("musicTime", bgMusic.currentTime);
        localStorage.setItem("musicPlaying", !bgMusic.paused);
        window.location.href = "batngo.html";
      }

      // Hi·ªáu ·ª©ng g√µ ch·ªØ
      const textContent = `Valentine 14/02 üíå...
    Ch√∫c em m·ªôt ng√†y th·∫≠t ·∫•m √°p, nhi·ªÅu ni·ªÅm vui, lu√¥n ƒë∆∞·ª£c y√™u th∆∞∆°ng v√† m·ªâm c∆∞·ªùi th·∫≠t nhi·ªÅu.
    
    Mong r·∫±ng h√¥m nay v√† c·∫£ nh·ªØng ng√†y sau, em ƒë·ªÅu c·∫£m nh·∫≠n ƒë∆∞·ª£c h·∫°nh ph√∫c theo c√°ch c·ªßa ri√™ng m√¨nh.
    
    Sau n√†y, l√∫c anh ƒëi th√¨ em c·ª© h√£y l√† ch√≠nh m√¨nh nha h·ªçc h√†nh th·∫≠t chƒÉm ch·ªâ ƒë·ª´ng b·ªã vi·ªác l√†m chi ph·ªëi vi·ªác h·ªçc v·ªõi th·ªùi gian c·ªßa em nhi·ªÅu qu√°. Lu√¥n lu√¥n ho√† ƒë·ªìng v√† vui v·∫ª v·ªõi m·ªçi ng∆∞·ªùi ƒë·ª´ng mu·ªôn phi·ªÅn ti√™u c·ª±c nhi·ªÅu kh√¥ng c√≥ t·ªët ƒë√¢u h·∫π h·∫π.`;

      const letterText = document.getElementById("letterText");
      const surpriseBtn = document.getElementById("surpriseBtn");
      let i = 0;

      function typeEffect() {
        if (i < textContent.length) {
          letterText.textContent += textContent.charAt(i);
          letterText.scrollTop = letterText.scrollHeight;

          i++;
          setTimeout(typeEffect, 70); // t·ªëc ƒë·ªô g√µ
        } else {
          letterText.style.borderRight = "none";
          surpriseBtn.style.display = "block";
          checkScrollIndicator();
        }
      }
    </script>
  </body>
</html>
